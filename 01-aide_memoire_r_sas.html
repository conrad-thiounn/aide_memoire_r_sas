<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Damien EUZENAT">
<meta name="author" content="Nassab ABDALLAH">
<meta name="dcterms.date" content="2023-12-18">
<meta name="description" content="Un aide-mémoire pour les statisticiens qui connaissent SAS et souhaitent travailler avec R.">

<title>Aide-mémoire SAS - R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="01-aide_memoire_r_sas_files/libs/clipboard/clipboard.min.js"></script>
<script src="01-aide_memoire_r_sas_files/libs/quarto-html/quarto.js"></script>
<script src="01-aide_memoire_r_sas_files/libs/quarto-html/popper.min.js"></script>
<script src="01-aide_memoire_r_sas_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01-aide_memoire_r_sas_files/libs/quarto-html/anchor.min.js"></script>
<link href="01-aide_memoire_r_sas_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01-aide_memoire_r_sas_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01-aide_memoire_r_sas_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01-aide_memoire_r_sas_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01-aide_memoire_r_sas_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Aide-mémoire SAS - <code>R</code></h1>
  <div class="quarto-categories">
    <div class="quarto-category">SAS</div>
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Un aide-mémoire pour les statisticiens qui connaissent SAS et souhaitent travailler avec <code>R</code>.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Damien EUZENAT<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> </p>
             <p>Nassab ABDALLAH<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 18, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>L’aide-mémoire a pour but de fournir des codes écrits en SAS et d’en donner la traduction en R de trois manières possibles :</p>
<ul>
<li><p>en utilisant la base R</p></li>
<li><p>en utilisant dplyr</p></li>
<li><p>en utilisant data.table <em>(en cours)</em></p></li>
</ul>
<p>Les éléments utilisés sont des codes typiques qui sont appliqués dans la production statistique ou dans la réalisation d’études descriptives.</p>
<p>Ce code s’adresse aux utilisateurs de SAS qui veulent connaître la traduction du code SAS en R ainsi qu’aux utilisateurs de R qui ont besoin de comprendre le code SAS.</p>
<section id="importation-des-packages" class="level2">
<h2 class="anchored" data-anchor-id="importation-des-packages">Importation des packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SASmarkdown)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée" class="level2">
<h2 class="anchored" data-anchor-id="chemin-vers-le-bureau-et-affichage-de-la-date-et-de-lannée">Chemin vers le bureau et affichage de la date et de l’année</h2>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-1-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<pre><code>/* Chemin du bureau de l'utilisateur */

/* On vide la log */
dm "log; clear; ";

/* On récupère déjà l'identifiant de l'utilisateur */
%let user = &amp;sysuserid;

/* Chemin proprement dit */
%let bureau = C:\Users\&amp;user.\Desktop;
libname bur "&amp;bureau.";

/* Affichage de l'année */
%let an = %sysfunc(year(%sysfunc(today())));

/* &amp; (esperluette) indique à SAS qu'il doit remplacer an par sa valeur définie par le %let */
%put Année : &amp;an.;

/* Autre possibilité */
data _null_;call symput('annee', strip(year(today())));run;
%put Année (autre méthode) : &amp;annee.;

/* Année passée */
%put Année passée : %eval(&amp;an. - 1);
</code></pre>
</div>
<div id="tabset-1-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On récupère déjà l'identifiant de l'utilisateur</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>user <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"USERNAME"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Chemin d'accès au bureau de l'utilisateur</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>chemin <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"C:/Users"</span>, user, <span class="st">"Desktop"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage de l'année</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>annee <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">Sys.Date</span>())</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"Année : %04d"</span>, annee)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">"Année : "</span>, annee))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>annee_1 <span class="ot">&lt;-</span> annee <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Année passée: "</span>, annee_1)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (annee <span class="sc">&gt;=</span> <span class="dv">2023</span>) {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Nous sommes en 2023 ou après"</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"Nous sommes en 2022 ou avant"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="création-dune-base-de-données" class="level2">
<h2 class="anchored" data-anchor-id="création-dune-base-de-données">Création d’une base de données</h2>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-2-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<pre><code>/* Données fictives sur des formations */
data Donnees;
infile cards dsd dlm='|';
format Identifiant $3. Sexe_red 1. CSP $1. Niveau $30. Date_naissance ddmmyy10. Date_entree ddmmyy10. Duree Note_Contenu Note_Formateur Note_Moyens
Note_Accompagnement Note_Materiel poids_sondage;
input Identifiant $ Sexe_red CSP $ Niveau $ Date_naissance :ddmmyy10. Date_entree :ddmmyy10. Duree Note_Contenu Note_Formateur Note_Moyens
Note_Accompagnement Note_Materiel poids_sondage;
cards;
173|2|1|Qualifie|17/06/1998|01/01/2021|308|12|6|17|4|19|117.1
173|2|1|qualifie|17/06/1998|01/01/2022|365|6||12|7|14|98.3
173|2|1|qualifie|17/06/1998|06/01/2022|185|8|10|11|1|9|214.6
173|2|1|Qualifie|17/06/1998|02/01/2023|365|14|15|15|10|8|84.7
174|1|1|qualifie|08/12/1984|17/08/2021|183|17|18|20|15|12|65.9
175|1|1|qualifie|16/09/1989|21/12/2022|730|5|5|8|4|9|148.2
198|2|4|Non qualifie|17/03/1987|28/07/2022|30|10|10|10|16|8|89.6
198|2|4|Qualifie|17/03/1987|17/11/2022|164|11|7|6|14|13|100.3
198|2|4|Qualifie|17/03/1987|21/02/2023|365|9|20|3|4|17|49.3
168|1|2|Qualifie|30/07/2002|04/09/2019|365|18|11|20|13|15|148.2
211|2|3|Non qualifie||17/12/2021|135|16|16|15|12|9|86.4
278|1|5|Qualifie|10/08/1948|07/06/2018|365|14|10|6|8|12|99.2
347|2|5|Qualifie|13/09/1955||180|12|5|7|11|12|105.6
112|1|3|Non qualifie|13/09/2001|02/03/2022|212|3|10|11|9|8|123.1
112|1|3|Non qualifie|13/09/2001|01/03/2021|365|7|13|8|19|2|137.4
112|1|3|Non qualifie|13/09/2001|01/12/2023|365||||||187.6
087|1|3|Non qualifie|||365||||||87.3
087|1|3|Non qualifie||31/10/2020|365||||||87.3
099|1|3|qualifie|06/06/1998|01/03/2021|364|12|11|10|12|13|169.3
099|1|3|qualifie|06/06/1998|01/03/2022|364|12|11|10|12|13|169.3
099|1|3|qualifie|06/06/1998|01/03/2023|364|12|11|10|12|13|169.3
187|2|2|qualifie|05/12/1986|01/01/2022|364|10|10|10|10|10|169.3
187|2|2|qualifie|05/12/1986|01/01/2023|364|10|10|10|10|10|234.1
689|1|1||01/12/2000|06/11/2017|123|9|7|8|13|16|189.3
765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9
765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9
765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9
;
run;</code></pre>
</div>
<div id="tabset-2-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la base R</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"Identifiant|Sexe_red|CSP|Niveau|Date_naissance|Date_entree|Duree|Note_Contenu|Note_Formateur|Note_Moyens|Note_Accompagnement|Note_Materiel|poids_sondage</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|01/01/2021|308|12|6|17|4|19|117.1</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|01/01/2022|365|6||12|7|14|98.3</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|06/01/2022|185|8|10|11|1|9|214.6</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|02/01/2023|365|14|15|15|10|8|84.7</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">174|1|1|qualifie|08/12/1984|17/08/2021|183|17|18|20|15|12|65.9</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">175|1|1|qualifie|16/09/1989|21/12/2022|730|5|5|8|4|9|148.2</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Non qualifie|17/03/1987|28/07/2022|30|10|10|10|16|8|89.6</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|17/11/2022|164|11|7|6|14|13|100.3</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|21/02/2023|365|9|20|3|4|17|49.3</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="st">168|1|2|Qualifie|30/07/2002|04/09/2019|365|18|11|20|13|15|148.2</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="st">211|2|3|Non qualifie||17/12/2021|135|16|16|15|12|9|86.4</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="st">278|1|5|Qualifie|10/08/1948|07/06/2018|365|14|10|6|8|12|99.2</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="st">347|2|5|Qualifie|13/09/1955||180|12|5|7|11|12|105.6</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|02/03/2022|212|3|10|11|9|8|123.1</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/03/2021|365|7|13|8|19|2|137.4</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/12/2023|365||||||187.6</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie|||365||||||87.3</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie||31/10/2020|365||||||87.3</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2021|364|12|11|10|12|13|169.3</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2022|364|12|11|10|12|13|169.3</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2023|364|12|11|10|12|13|169.3</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2022|364|10|10|10|10|10|169.3</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2023|364|10|10|10|10|10|234.1</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="st">689|1|1||01/12/2000|06/11/2017|123|9|7|8|13|16|189.3</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fichier <span class="ot">&lt;-</span> <span class="fu">file.path</span>(chemin, <span class="st">"Passage SAS à R.csv"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># On copie ce fichier texte sur le bureau de l'utilisateur</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(a, <span class="at">con =</span> fichier)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># On va importer ce fichier texte en base R (dataframe)</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># On importe la base de données dans R</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># on importe par défaut les colonnes en texte</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(chemin, <span class="st">"Passage SAS à R.csv"</span>), <span class="at">sep =</span> <span class="st">"|"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na.strings =</span> <span class="st">""</span>,<span class="at">colClasses =</span> <span class="fu">rep</span>(<span class="st">"character"</span>,<span class="fu">length</span>(data)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la base R</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">"Identifiant|Sexe_red|CSP|Niveau|Date_naissance|Date_entree|Duree|Note_Contenu|Note_Formateur|Note_Moyens|Note_Accompagnement|Note_Materiel|poids_sondage</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|01/01/2021|308|12|6|17|4|19|117.1</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|01/01/2022|365|6||12|7|14|98.3</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|qualifie|17/06/1998|06/01/2022|185|8|10|11|1|9|214.6</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="st">173|2|1|Qualifie|17/06/1998|02/01/2023|365|14|15|15|10|8|84.7</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="st">174|1|1|qualifie|08/12/1984|17/08/2021|183|17|18|20|15|12|65.9</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="st">175|1|1|qualifie|16/09/1989|21/12/2022|730|5|5|8|4|9|148.2</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Non qualifie|17/03/1987|28/07/2022|30|10|10|10|16|8|89.6</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|17/11/2022|164|11|7|6|14|13|100.3</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="st">198|2|4|Qualifie|17/03/1987|21/02/2023|365|9|20|3|4|17|49.3</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="st">168|1|2|Qualifie|30/07/2002|04/09/2019|365|18|11|20|13|15|148.2</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="st">211|2|3|Non qualifie||17/12/2021|135|16|16|15|12|9|86.4</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="st">278|1|5|Qualifie|10/08/1948|07/06/2018|365|14|10|6|8|12|99.2</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="st">347|2|5|Qualifie|13/09/1955||180|12|5|7|11|12|105.6</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|02/03/2022|212|3|10|11|9|8|123.1</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/03/2021|365|7|13|8|19|2|137.4</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="st">112|1|3|Non qualifie|13/09/2001|01/12/2023|365||||||187.6</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie|||365||||||87.3</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="st">087|1|3|Non qualifie||31/10/2020|365||||||87.3</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2021|364|12|11|10|12|13|169.3</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2022|364|12|11|10|12|13|169.3</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="st">099|1|3|qualifie|06/06/1998|01/03/2023|364|12|11|10|12|13|169.3</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2022|364|10|10|10|10|10|169.3</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="st">187|2|2|qualifie|05/12/1986|01/01/2023|364|10|10|10|10|10|234.1</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="st">689|1|1||01/12/2000|06/11/2017|123|9|7|8|13|16|189.3</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="st">765|1|4|Non qualifie|26/12/1995|17/04/2020|160|13|10|12|18|10|45.9"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#readLines va permettre de créer un objet pour chaque ligne</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#strsplit va permettre de séparer les textes qui sont entre des "|" </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span>  <span class="fu">readLines</span>(<span class="fu">textConnection</span>(a)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">strsplit</span>(<span class="at">split=</span><span class="st">'|'</span>,<span class="at">fixed=</span><span class="cn">TRUE</span>) </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">unlist</span>(a), <span class="at">nrow=</span><span class="fu">length</span>(a), <span class="at">byrow=</span><span class="cn">TRUE</span>))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">#La première ligne donne le nom des colonnes</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">row_to_names</span>(<span class="at">row_number =</span> <span class="dv">1</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#On remplace les valeurs qui sont des espaces par des "NA" dans toute </span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#la base de données </span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">mutate_all</span>(na_if,<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="manipuler-les-colonnes-de-la-base-de-données" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-les-colonnes-de-la-base-de-données">Manipuler les colonnes de la base de données</h2>
<p><span style="color:red"><strong>R étant sensible à la casse, ce qui n’est pas le cas de SAS, cette section est donc pertinente pour les codes sous R.</strong></span></p>
<ol type="1">
<li>Extraire les noms des variables de la base</li>
<li>Mettre le nom de la colonne en minuscules</li>
</ol>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-3-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R est sensible à la casse, il est pertinent d'harmoniser les noms des variables en minuscule</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>nomCol <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(donnees_rbase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(donnees_rbase) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">colnames</span>(donnees_rbase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">set_colnames</span>(<span class="at">value =</span> <span class="fu">casefold</span>(<span class="fu">colnames</span>(.), <span class="at">upper =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="harmoniser-le-format-des-variables" class="level2">
<h2 class="anchored" data-anchor-id="harmoniser-le-format-des-variables">Harmoniser le format des variables</h2>
<p>Convertir certaines variables en format ‘date’, ‘integer’ et ‘numeric’</p>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-4-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<pre><code>  data Donnees_sas;
  set Donnees_sas;
  duree_int = input(duree, 1.);
  note_contenu_int = input(note_contenu, 1.);
  note_formateur_int = input(note_formateur, 1.);
  note_moyens_int = input(note_moyens, 1.);
  note_accompagnement_int = input(note_accompagnement, 1.);
  note_materiel_int = input(note_materiel, 1.);
  date_naissance_date = input(date_naissance, DDMMYY10.);
  date_entree = input(date_entree, DDMMYY10.);
run;
</code></pre>
</div>
<div id="tabset-4-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"duree"</span>, <span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">'date_naissance'</span>, <span class="st">'date_entree'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, enNumerique] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(donnees_rbase[, enNumerique], as.integer)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, enDate] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(donnees_rbase[, enDate], lubridate<span class="sc">::</span>dmy)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>poids_sondage <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(donnees_rbase<span class="sc">$</span>poids_sondage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>enNumerique <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"duree"</span>, <span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>enDate <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">'date_naissance'</span>, <span class="st">'date_entree'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enNumerique, as.integer) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">poids_sondage=</span><span class="fu">as.numeric</span>(poids_sondage)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(enDate, lubridate<span class="sc">::</span>dmy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="information-sur-la-base-de-données" class="level2">
<h2 class="anchored" data-anchor-id="information-sur-la-base-de-données">Information sur la base de données</h2>
<section id="extraire-les-10-première-lignes-de-la-base" class="level3">
<h3 class="anchored" data-anchor-id="extraire-les-10-première-lignes-de-la-base">Extraire les 10 première lignes de la base</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-5-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<pre><code>/* Extraire les x premières lignes de la base (10 par défaut) */

%let x = 10;
proc print data = Donnees_sas (firstobs = 1 obs = &amp;x.);run;

/* Ou alors */
data Lignes&amp;x.;set Donnees_sas (firstobs = 1 obs = &amp;x.);proc print;run;
</code></pre>
</div>
<div id="tabset-5-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraire les 10 premières lignes de la base</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(donnees_rbase)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(donnees_rbase[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ])</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(donnees_rbase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="renommer-les-variables" class="level3">
<h3 class="anchored" data-anchor-id="renommer-les-variables">Renommer les variables</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-6-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<pre><code>/* On renomme la variable sexe_red en sexe */
  
  data Donnees_sas;
  set Donnees_sas (rename = (sexe_red = sexe));
  run;
</code></pre>
</div>
<div id="tabset-6-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On renomme la variable sexe_red en sexe</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>sexe <span class="ot">&lt;-</span> donnees_rbase<span class="sc">$</span>sexe_red</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Attention, lorsqu'on utilise ce code pour renommer la variable, l'ancienne variable reste dans la base de données </span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="sc">-</span><span class="fu">which</span>(<span class="fu">names</span>(donnees_rbase) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"sexe_red"</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On renomme la variable sexe_red en sexe</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># La fonction rename() va écraser l'ancien nom de la variable contrairement au code utilisé dans la section R base</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">sexe=</span>sexe_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="nombre-de-lignes-et-de-colonnes-dans-la-base" class="level3">
<h3 class="anchored" data-anchor-id="nombre-de-lignes-et-de-colonnes-dans-la-base">Nombre de lignes et de colonnes dans la base</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-7-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<pre><code>/* Nombre de lignes */
  
  proc sql;select count(*) as Nb_Lignes from Donnees_sas;quit;

/* Nombre de colonnes */

  proc sql;select count(*) as Nb_Colonnes from Var;quit;</code></pre>
</div>
<div id="tabset-7-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de lignes et de colonnes dans la base</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"Nombre de lignes : %d | Nombre de colonnes : %d"</span>, <span class="fu">dim</span>(donnees_rbase)[<span class="dv">1</span>], <span class="fu">dim</span>(donnees_rbase)[<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de lignes</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Nombre de colonnes</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span>  <span class="fu">ncol</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="afficher-les-noms-des-variables-de-la-base" class="level3">
<h3 class="anchored" data-anchor-id="afficher-les-noms-des-variables-de-la-base">Afficher les noms des variables de la base</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-8-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<pre><code>  proc contents data=donnees_sas; run;
</code></pre>
</div>
<div id="tabset-8-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(donnees_rbase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> <span class="fu">colnames</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="création-de-colonnes-et-de-lignes" class="level3">
<h3 class="anchored" data-anchor-id="création-de-colonnes-et-de-lignes">Création de colonnes et de lignes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-9-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<pre><code>data Donnees_sas;
  set Donnees_sas;
  note2 = note_contenu / 20 * 5;
  Age = intck('year', date_naissance, date_entree);
  run;</code></pre>
</div>
<div id="tabset-9-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne note2</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>note2 <span class="ot">&lt;-</span> donnees_rbase<span class="sc">$</span>note_contenu <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne age </span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">floor</span>(lubridate<span class="sc">::</span><span class="fu">time_length</span>(<span class="fu">difftime</span>(donnees_rbase<span class="sc">$</span>date_entree, donnees_rbase<span class="sc">$</span>date_naissance), <span class="st">"years"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne note2</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">note2=</span> note_contenu <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Création de la colonne age </span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">age=</span><span class="fu">as.period</span>(<span class="fu">interval</span>(<span class="at">start =</span> date_naissance, <span class="at">end =</span> date_entree))<span class="sc">$</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="supression-de-colonnes-et-de-lignes" class="level3">
<h3 class="anchored" data-anchor-id="supression-de-colonnes-et-de-lignes">Supression de colonnes et de lignes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-10-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<pre><code>data Donnees_sas;
  set Donnees_sas;
  drop note2;
  run;</code></pre>
</div>
<div id="tabset-10-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>note2 <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>note2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="formater-les-modalités-des-valeurs" class="level2">
<h2 class="anchored" data-anchor-id="formater-les-modalités-des-valeurs">Formater les modalités des valeurs</h2>
<section id="valeur-discrète" class="level3">
<h3 class="anchored" data-anchor-id="valeur-discrète">Valeur discrète</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-11-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<pre><code>proc format;
  value sexef
  1 = "Homme"
  2 = "Femme";

  value $ cspf
  '1' = "Cadre"
  '2' = "Profession intermédiaire"
  '3' = "Employé"
  '4' = "Ouvrier"
  '5' = "Retraité";
run;</code></pre>
</div>
<div id="tabset-11-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>sexef <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Homme"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Femme"</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>cspf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Cadre"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Profession intermédiaire"</span>, <span class="st">"3"</span> <span class="ot">=</span> <span class="st">"Employé"</span>, <span class="st">"4"</span> <span class="ot">=</span> <span class="st">"Ouvrier"</span>, <span class="st">"5"</span> <span class="ot">=</span> <span class="st">"Retraité"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On exprime CSP et sexe en formaté</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>cspf <span class="ot">&lt;-</span> cspf[donnees_rbase<span class="sc">$</span>csp]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>sexef <span class="ot">&lt;-</span> sexef[donnees_rbase<span class="sc">$</span>sexe]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sexef =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    sexe<span class="sc">==</span><span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Homme"</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    sexe<span class="sc">==</span><span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Femme"</span>,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> sexe),</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cspf =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Cadre"</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"2"</span> <span class="sc">~</span> <span class="st">"Profession intermédiaire"</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"3"</span> <span class="sc">~</span> <span class="st">"Employé"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"4"</span> <span class="sc">~</span> <span class="st">"Ouvrier"</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    csp<span class="sc">==</span><span class="st">"5"</span> <span class="sc">~</span> <span class="st">"Retraité"</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> csp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="valeur-continue" class="level3">
<h3 class="anchored" data-anchor-id="valeur-continue">Valeur continue</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-12-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<pre><code>proc format;
  value agef
  low-&lt;26 = "1. De 15 à 25 ans"
  26&lt;-&lt;50 = "2. De 26 à 49 ans"
  50-high = "3. 50 ans ou plus";
run;</code></pre>
</div>
<div id="tabset-12-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[donnees_rbase<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">26</span>]                     <span class="ot">&lt;-</span> <span class="st">"1. De 15 à 25 ans"</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 26 &lt;= donnees_rbase$age &lt; 50 ne fonctionne pas, il faut passer en 2 étapes</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[<span class="dv">26</span> <span class="sc">&lt;=</span> donnees_rbase<span class="sc">$</span>age <span class="sc">&amp;</span> donnees_rbase<span class="sc">$</span>age <span class="sc">&lt;</span> <span class="dv">50</span>] <span class="ot">&lt;-</span> <span class="st">"2. De 26 à 49 ans"</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>agef[donnees_rbase<span class="sc">$</span>age <span class="sc">&gt;=</span> <span class="dv">50</span>]                    <span class="ot">&lt;-</span> <span class="st">"3. 50 ans ou plus"</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre solution</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>agef <span class="ot">&lt;-</span> <span class="fu">cut</span>(donnees_rbase<span class="sc">$</span>age, </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">49</span>, <span class="cn">Inf</span>),</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">right =</span> <span class="cn">TRUE</span>,</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1. De 15 à 25 ans"</span>, <span class="st">"2. De 26 à 49 ans"</span>, <span class="st">"3. 50 ans ou plus"</span>), </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordered_result =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">agef =</span> <span class="fu">case_when</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&lt;</span> <span class="dv">26</span> <span class="sc">~</span> <span class="st">"1. De 15 à 25 ans"</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">26</span> <span class="sc">|</span> age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span>  <span class="st">"2. De 26 à 49 ans"</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    age <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">~</span> <span class="st">"3. 50 ans ou plus"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-lignes-et-des-colonnes" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-des-lignes-et-des-colonnes">Manipuler des lignes et des colonnes</h2>
<p><em>A rajouter : la selection basée sur des conditions</em></p>
<section id="sélection-de-colonnes" class="level3">
<h3 class="anchored" data-anchor-id="sélection-de-colonnes">Sélection de colonnes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-3" role="tab" aria-controls="tabset-13-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-13-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<pre><code>proc sql;
  create table work.donnees_col_select_sas as
  select    identifiant, csp, niveau
  from work.donnees_sas;
quit; 
</code></pre>
</div>
<div id="tabset-13-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>donnees_col_select_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"csp"</span>, <span class="st">"niveau"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-13-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>donnees_col_select_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, csp, niveau)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="selection-de-lignes" class="level3">
<h3 class="anchored" data-anchor-id="selection-de-lignes">Selection de lignes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-3" role="tab" aria-controls="tabset-14-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-14-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<pre><code>  data donnees_sas; 
  set donnees_sas; 
  where sexef="Femme";
  run;
  </code></pre>
</div>
<div id="tabset-14-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>donnees_femme_rbase <span class="ot">&lt;-</span> donnees_rbase[donnees_rbase<span class="sc">$</span>sexef<span class="sc">==</span><span class="st">"Femme"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-14-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-14-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>donnees_femme_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sexef<span class="sc">==</span><span class="st">"Femme"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-lignes-et-des-colonnes-1" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-des-lignes-et-des-colonnes-1">Manipuler des lignes et des colonnes</h2>
<section id="mettre-un-0-devant-un-nombre" class="level3">
<h3 class="anchored" data-anchor-id="mettre-un-0-devant-un-nombre">Mettre un 0 devant un nombre</h3>
<ol type="1">
<li>Créer la variable <strong>mois</strong></li>
<li>Mettre un 0 devant si le mois est inférieur à 9</li>
</ol>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-3" role="tab" aria-controls="tabset-15-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-15-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<pre><code>/* Mettre un 0 devant un nombre */
  
  data Zero_devant;set Donnees_sas (keep = date_entree);
  /* Obtenir le mois et la date */
   Mois = month(date_entree);
  /* Mettre le mois sur 2 positions (avec un 0 devant si le mois &lt;= 9) : format prédéfini z2. */
  Mois_a = put(Mois, z2.);
  drop Mois;
  rename Mois_a = Mois;
  run;</code></pre>
</div>
<div id="tabset-15-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir le mois et la date</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>mois <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">month</span>(donnees_rbase<span class="sc">$</span>date_entree)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Mettre le numéro du mois sur 2 positions (avec un 0 devant si le mois &lt;= 9)</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>mois <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, donnees_rbase<span class="sc">$</span>mois)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-15-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mois=</span>lubridate<span class="sc">::</span><span class="fu">month</span>(date_entree),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">mois=</span><span class="fu">ifelse</span>(<span class="fu">str_length</span>(mois)<span class="sc">&lt;</span><span class="dv">2</span>, <span class="fu">paste0</span>(<span class="st">"0"</span>, mois), mois))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="réexprimer-en-masse-des-valeurs" class="level3">
<h3 class="anchored" data-anchor-id="réexprimer-en-masse-des-valeurs">Réexprimer en masse des valeurs</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-16-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-1" role="tab" aria-controls="tabset-16-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-2" role="tab" aria-controls="tabset-16-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-3" role="tab" aria-controls="tabset-16-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-16-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-16-1-tab">
<pre><code>/* On souhaite rééxprimer toutes les notes sur 100 et non sur 20 */
  
   %let notes = Note_Contenu   Note_Formateur Note_Moyens     Note_Accompagnement     Note_Materiel;
/* On supprime les doubles blancs entre les variables */
   %let notes = %sysfunc(compbl(&amp;notes.));
%put &amp;notes;
  
/* 1ère solution : avec les array */
  
  data Sur100_1;
  set Donnees_sas;
  array variables (*) &amp;notes.;
  do increment = 1 to dim(variables);
    variables[increment] = variables[increment] / 20 * 100;
  end; 
  drop increment;
run; 
  
  
/* 2e solution : avec une macro */

  data Sur100_2;
  set Donnees;
  %macro Sur100;
    %do i = 1 %to %sysfunc(countw(&amp;notes.));
      %let note = %scan(&amp;notes., &amp;i.);
      &amp;note. = &amp;note. / 20 * 100;
    %end;
  %mend Sur100;
  %Sur5;
run; 
  
  
/* 3e solution : l'équivalent des list-comprehension de Python en SAS */


  data Sur100_3;
  set Donnees_sas;
  %macro List_comprehension;
    %do i = 1 %to %sysfunc(countw(&amp;notes.));
      %let j = %scan(&amp;notes., &amp;i.);
        &amp;j. = &amp;j. / 20 * 100
    %end;);;
  %mend List_comprehension;
  %List_comprehension;
run;</code></pre>
</div>
<div id="tabset-16-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-16-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On souhaite rééxprimer les notes sur 100 et non sur 20</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>notes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, notes] <span class="ot">&lt;-</span> donnees_rbase[, notes] <span class="sc">/</span> <span class="dv">20</span> <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-16-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-16-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>notes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"note_contenu"</span>, <span class="st">"note_formateur"</span>, <span class="st">"note_moyens"</span>, <span class="st">"note_accompagnement"</span>, <span class="st">"note_materiel"</span>)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(notes, <span class="sc">~</span> .x<span class="sc">/</span><span class="dv">20</span><span class="sc">*</span><span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="passer-une-variable-de-numérique-à-caractère-et-vice-versa" class="level3">
<h3 class="anchored" data-anchor-id="passer-une-variable-de-numérique-à-caractère-et-vice-versa">Passer une variable de numérique à caractère et vice-versa</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-17-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-1" role="tab" aria-controls="tabset-17-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-2" role="tab" aria-controls="tabset-17-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-3" role="tab" aria-controls="tabset-17-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-17-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-17-1-tab">

</div>
<div id="tabset-17-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-17-2-tab">

</div>
<div id="tabset-17-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-17-3-tab">

</div>
</div>
</div>
</section>
<section id="arrondir-une-valeur-numérique" class="level3">
<h3 class="anchored" data-anchor-id="arrondir-une-valeur-numérique">Arrondir une valeur numérique</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-18-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-1" role="tab" aria-controls="tabset-18-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-2" role="tab" aria-controls="tabset-18-2" aria-selected="false" href="">R</a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-18-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-18-1-tab">
<pre><code>/* Arrondir une valeur numérique */
 data Arrondis;set Donnees_sas (keep = Poids);
/* Arrondi à l'entier le plus proche */
 poids_arrondi_0 = round(poids, 0.0);
/* Arrondi à 1 chiffre après la virgule */
 poids_arrondi_1 = round(poids, 0.1);
/* Arrondi à 2 chiffre après la virgule */
 poids_arrondi_2 = round(poids, 0.2);
/* Arrondi à l'entier inférieur */
 poids_inf = floor(poids);
/* Arrondi à l'entier inférieur */
 poids_inf = ceil(poids);  
run;</code></pre>
</div>
<div id="tabset-18-2" class="tabset tabset-fade tabset-pills tab-pane" role="tabpanel" aria-labelledby="tabset-18-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier le plus proche</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>poids_arrondi_0 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">0</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à 1 chiffre après la virgule</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>poids_arrondi_1 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">1</span>)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à 2 chiffre après la virgule</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>poids_arrondi_2 <span class="ot">&lt;-</span> <span class="fu">round</span>(donnees_rbase<span class="sc">$</span>poids, <span class="dv">2</span>)</span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>poids_inf <span class="ot">&lt;-</span> <span class="fu">floor</span>(donnees_rbase<span class="sc">$</span>poids)</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrondi à l'entier inférieur</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>poids_inf <span class="ot">&lt;-</span> <span class="fu">ceiling</span>(donnees_rbase<span class="sc">$</span>poids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-tris" class="level2">
<h2 class="anchored" data-anchor-id="les-tris">Les tris</h2>
<section id="trier-par-colonne" class="level3">
<h3 class="anchored" data-anchor-id="trier-par-colonne">Trier par colonne</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-19-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-1" role="tab" aria-controls="tabset-19-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-2" role="tab" aria-controls="tabset-19-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-3" role="tab" aria-controls="tabset-19-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-19-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-19-1-tab">
<pre><code>/* On met identifiant date_entree et date_sortie au début de la base */
 %let colTri = identifiant date_entree;
data Donnees_sas;
  retain &amp;colTri.;
  set Donnees_sas;
run;
  
/* Autre solution */
 proc sql;
  create table Donnees_sas as 
  /* On remplace les blancs entre les mots par des virgules pour la proc SQL */
  /* Dans la proc SQL, les variables doivent être séparées par des virgules */
   select %sysfunc(tranwrd(&amp;colTri., %str( ), %str(, ))), * from Donnees_sas;
quit;</code></pre>
</div>
<div id="tabset-19-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-19-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree et date_sortie au début</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>colTri <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"date_entree"</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase[, <span class="fu">c</span>(colTri, <span class="fu">colnames</span>(donnees_rbase)[<span class="sc">!</span> <span class="fu">colnames</span>(donnees_rbase) <span class="sc">%in%</span> colTri])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-19-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-19-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree et date_sortie au début</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, date_entree, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="trier-les-lignes-par-ordre-croissant-ou-décroissant" class="level3">
<h3 class="anchored" data-anchor-id="trier-les-lignes-par-ordre-croissant-ou-décroissant">Trier les lignes par ordre croissant ou décroissant</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-20-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-1" role="tab" aria-controls="tabset-20-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-2" role="tab" aria-controls="tabset-20-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-3" role="tab" aria-controls="tabset-20-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-20-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-20-1-tab">
<pre><code>/* Trier la base par ligne (individu et date de début de la formation) par ordre décroissant : 2 possibilités */

proc sort data = Donnees_sas;by Identifiant Date_entree;run;
proc sql;create table Donnes as select * from Donnees_sas order by Identifiant, Date_entree;quit;
  
/* Idem par ordre croissant d'identifiant et ordre décroissant de date d'entrée*/

proc sort data = Donnees_sas;by Identifiant Date_entree descending;run;
proc sql;create table Donnes as select * from Donnees_sas order by Identifiant, desc Date_entree;quit;
</code></pre>
</div>
<div id="tabset-20-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-20-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># L'option na.last = FALSE (resp. TRUE) indique que les valeurs manquantes doivent figurer à la fin (resp. au début) du tri, que le tri</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co"># soit croissant ou décroissant</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree (- avant le nom de la variable)</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="co">#donnees_rbase &lt;- donnees_rbase[order(donnees_rbase$identifiant, -donnees_rbase$date_entree, na.last = FALSE), ]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-20-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-20-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, date_entree)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree </span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, <span class="fu">desc</span>(date_entree))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r" class="level3">
<h3 class="anchored" data-anchor-id="incidence-des-valeurs-manquantes-dans-les-tris-différence-entre-sas-et-r">Incidence des valeurs manquantes dans les tris, différence entre SAS et R</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-21-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-1" role="tab" aria-controls="tabset-21-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-2" role="tab" aria-controls="tabset-21-2" aria-selected="false" href=""><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-21-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-21-1-tab">
<pre><code>proc sort data = Donnees_sas;
by identifiant date_entree;run;
proc print
;run;

/* ... et en dernier selon un tri par ordre décroissant */

proc sort data = Donnees_sas;
by identifiant descending date_entree;
run;
proc print;
run;

/* En effet, les valeurs manquantes sont considérées comme des valeurs négatives */</code></pre>
</div>
<div id="tabset-21-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-21-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les valeurs manquantes sont situées en dernier dans un tri par ordre croissant ou décroissant (car par défaut l'option na.last = TRUE) ...</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree), ]</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour mimer le tri SAS, il faut écrire :</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-dates" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-des-dates">Manipuler des dates</h2>
<section id="créer-une-date" class="level3">
<h3 class="anchored" data-anchor-id="créer-une-date">Créer une date</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-22-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-1" role="tab" aria-controls="tabset-22-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-2" role="tab" aria-controls="tabset-22-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-3" role="tab" aria-controls="tabset-22-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-22-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-22-1-tab">

</div>
<div id="tabset-22-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-22-2-tab">

</div>
<div id="tabset-22-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-22-3-tab">

</div>
</div>
</div>
</section>
<section id="calculer-des-durées" class="level3">
<h3 class="anchored" data-anchor-id="calculer-des-durées">Calculer des durées</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-23-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-1" role="tab" aria-controls="tabset-23-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-2" role="tab" aria-controls="tabset-23-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-3" role="tab" aria-controls="tabset-23-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-23-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-23-1-tab">

</div>
<div id="tabset-23-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-23-2-tab">

</div>
<div id="tabset-23-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-23-3-tab">

</div>
</div>
</div>
</section>
<section id="ajouter-une-durée-à-une-date" class="level3">
<h3 class="anchored" data-anchor-id="ajouter-une-durée-à-une-date">Ajouter une durée à une date</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-24-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-1" role="tab" aria-controls="tabset-24-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-2" role="tab" aria-controls="tabset-24-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-3" role="tab" aria-controls="tabset-24-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-24-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-24-1-tab">

</div>
<div id="tabset-24-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-24-2-tab">

</div>
<div id="tabset-24-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-24-3-tab">

</div>
</div>
</div>
</section>
</section>
<section id="manipuler-des-chaînes-de-caractères" class="level2">
<h2 class="anchored" data-anchor-id="manipuler-des-chaînes-de-caractères">Manipuler des chaînes de caractères</h2>
<section id="majuscule-minuscule" class="level3">
<h3 class="anchored" data-anchor-id="majuscule-minuscule">Majuscule, minuscule</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-25-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-1" role="tab" aria-controls="tabset-25-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-25-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-2" role="tab" aria-controls="tabset-25-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-25-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-3" role="tab" aria-controls="tabset-25-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-25-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-25-1-tab">
<pre><code>
/*Première lettre en majuscule*/

  data Donnees_sas;
  set Donnees_sas;
  Niveau = propcase(Niveau);
  run;


/*Majuscule*/

  data Donnees_sas;
  set Donnees_sas;
  CSP_majuscule = upcase(CSPF);
  run;

/*Minuscule*/

  data Donnees_sas;
  set Donnees_sas;
  CSP_minuscule = lowcase(CSPF);
  run;</code></pre>
</div>
<div id="tabset-25-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-25-2-tab">
<ul>
<li>Première lettre en majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>niveau <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="fu">toupper</span>(<span class="fu">substr</span>(donnees_rbase<span class="sc">$</span>niveau, <span class="dv">1</span>, <span class="dv">1</span>)), <span class="fu">tolower</span>(<span class="fu">substr</span>(donnees_rbase<span class="sc">$</span>niveau, <span class="dv">2</span>, <span class="fu">length</span>(donnees_rbase<span class="sc">$</span>niveau))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>csp_maj <span class="ot">&lt;-</span> <span class="fu">toupper</span>(donnees_rbase<span class="sc">$</span>cspf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Minuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>csp_maj <span class="ot">&lt;-</span> <span class="fu">tolower</span>(donnees_rbase<span class="sc">$</span>cspf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-25-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-25-3-tab">
<ul>
<li>Première lettre en majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">niveau=</span><span class="fu">str_to_title</span>(niveau))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Majuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">csp_maj=</span><span class="fu">toupper</span>(cspf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Minuscule</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">csp_maj=</span><span class="fu">tolower</span>(cspf))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="remplacer-une-chaîne-de-catactère-par-une-autre" class="level3">
<h3 class="anchored" data-anchor-id="remplacer-une-chaîne-de-catactère-par-une-autre">Remplacer une chaîne de catactère par une autre</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-26-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-1" role="tab" aria-controls="tabset-26-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-26-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-2" role="tab" aria-controls="tabset-26-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-26-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-3" role="tab" aria-controls="tabset-26-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-26-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-26-1-tab">
<pre><code>data Donnees_sas;
set Donnees_sas;
Niveau = tranwrd(Niveau, "Qualifie", "Qualifié");
run;
</code></pre>
</div>
<div id="tabset-26-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-26-2-tab">

</div>
<div id="tabset-26-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-26-3-tab">

</div>
</div>
</div>
</section>
<section id="supprimer-des-blancs" class="level3">
<h3 class="anchored" data-anchor-id="supprimer-des-blancs">Supprimer des blancs</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-27-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-1" role="tab" aria-controls="tabset-27-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-27-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-2" role="tab" aria-controls="tabset-27-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-27-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-3" role="tab" aria-controls="tabset-27-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-27-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-27-1-tab">
<pre><code>/* Manipuler des chaînes de caractères =&gt; R = gsub, grepl etc. */
data Exemple_chaines;
Texte = "              Ce   Texte   mériterait   d être   corrigé                  ";
Texte1 = "Je m'appelle";
Texte2 = "SAS";
run;
data Exemple_chaines;set Exemple_chaines;
/* Enlever les blancs au début et à la fin de la chaîne de caractère */
Enlever_Blancs_Initiaux = strip(Texte);
/* Enlever les doubles blancs dans la chaîne de caractères */
Enlever_Blancs_Entre = compbl(Enlever_Blancs_Initiaux);
run;</code></pre>
</div>
<div id="tabset-27-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-27-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>texte_rbsase <span class="ot">&lt;-</span> <span class="st">"              Ce   Texte   mériterait   d être   corrigé                  "</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>texte_rbase_1 <span class="ot">&lt;-</span> <span class="st">"Je m'appelle"</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>texte_rbase_2 <span class="ot">&lt;-</span> <span class="st">"R"</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="co"># trimws enlève les espaces au début et à la fin d'une chaîne de caractère</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>texte_rbase <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>, <span class="st">" "</span>, <span class="fu">trimws</span>(texte_rbsase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-27-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-27-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>texte_tidyverse <span class="ot">&lt;-</span> <span class="st">"              Ce   Texte   mériterait   d être   corrigé                  "</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>texte_tidyverse_1 <span class="ot">&lt;-</span> <span class="st">"Je m'appelle"</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>texte_tidyverse_2 <span class="ot">&lt;-</span> <span class="st">"R"</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co"># str_squish() supprime les espaces blancs au début et à la fin, et remplace tous les espaces blancs internes par un seul espace</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>texte_tidyverse <span class="ot">&lt;-</span> <span class="fu">str_squish</span>(texte_tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="concaténer-des-chaînes-de-caractères" class="level3">
<h3 class="anchored" data-anchor-id="concaténer-des-chaînes-de-caractères">Concaténer des chaînes de caractères</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-28-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-28-1" role="tab" aria-controls="tabset-28-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-28-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-28-2" role="tab" aria-controls="tabset-28-2" aria-selected="false" href=""><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-28-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-28-1-tab">
<pre><code>/* Trois méthodes pour concaténer des chaînes de caractères */
Concatener  = Texte1||" "||Texte2;
Concatener2 = Texte1!!" "!!Texte2;
Concatener3 = catx(" ", Texte1, Texte2);
/* Extraire les 2e, 3e et 4e caractères de Concatener */
/* 2 correspond à la position du 1er caractère à récupérer, 3 le nombre total de caractères à partir du point de départ */
extrait = substr(Concatener, 2, 3);
run;</code></pre>
</div>
<div id="tabset-28-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-28-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Concaténer des chaînes de caractères</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(texte_rbase_1, texte_rbase_2, <span class="at">sep =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="nombre-de-caractères-dans-une-chaîne-de-caractères" class="level3">
<h3 class="anchored" data-anchor-id="nombre-de-caractères-dans-une-chaîne-de-caractères">Nombre de caractères dans une chaîne de caractères</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-29-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-1" role="tab" aria-controls="tabset-29-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-29-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-2" role="tab" aria-controls="tabset-29-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-29-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-29-3" role="tab" aria-controls="tabset-29-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-29-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-29-1-tab">

</div>
<div id="tabset-29-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-29-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de caractères dans une chaîne de caractères</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>taille_id <span class="ot">&lt;-</span> <span class="fu">nchar</span>(donnees_rbase<span class="sc">$</span>identifiant)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-29-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-29-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de caractères dans une chaîne de caractères</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">taille_id =</span> <span class="fu">str_split</span>(identifiant, <span class="st">''</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>              lengths)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="transformer-plusieurs-caractères-différents" class="level3">
<h3 class="anchored" data-anchor-id="transformer-plusieurs-caractères-différents">Transformer plusieurs caractères différents</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-30-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-30-1" role="tab" aria-controls="tabset-30-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-30-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-30-2" role="tab" aria-controls="tabset-30-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-30-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-30-3" role="tab" aria-controls="tabset-30-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-30-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-30-1-tab">
<pre><code>
/* Transformer plusieurs caractères différents */
chaine = "éèêëàâçîô";
/* On transforme le é en e, le â en a, le î en i, ... */
chaine_sans_accent = translate(chaine, "eeeeaacio", "éèêëàâçîô");
run;
</code></pre>
</div>
<div id="tabset-30-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-30-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer plusieurs caractères différents</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>chaine <span class="ot">&lt;-</span> <span class="st">"éèêëàâçîô"</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chartr</span>(<span class="st">"éèêëàâçîô"</span>, <span class="st">"eeeeaacio"</span>, chaine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-30-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-30-3-tab">

</div>
</div>
</div>
</section>
</section>
<section id="gestion-ligne-par-ligne" class="level2">
<h2 class="anchored" data-anchor-id="gestion-ligne-par-ligne">Gestion ligne par ligne</h2>
<section id="numéro-de-lobservation" class="level3">
<h3 class="anchored" data-anchor-id="numéro-de-lobservation">Numéro de l’observation</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-31-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-1" role="tab" aria-controls="tabset-31-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-31-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-2" role="tab" aria-controls="tabset-31-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-31-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-31-3" role="tab" aria-controls="tabset-31-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-31-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-31-1-tab">
<pre><code>/* Numéro de l'observation */
data Donnees;set Donnees;
Num_observation = _n_;
run;

/* Autre solution */
proc sql noprint;select count(*) into :nbLignes from Donnees;quit;
data numLigne;do Num_observation = 1 to &amp;nbLignes.;output;end;run;</code></pre>
</div>
<div id="tabset-31-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-31-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro de l'observation : 2 manières différentes</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>num_observation <span class="ot">&lt;-</span> <span class="fu">row.names</span>(donnees_rbase)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>num_observation <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span> <span class="sc">:</span> <span class="fu">nrow</span>(donnees_rbase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-31-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-31-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">num_observation=</span> <span class="fu">row_number</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="trier-des-colonnes" class="level3">
<h3 class="anchored" data-anchor-id="trier-des-colonnes">Trier des colonnes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-32-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-1" role="tab" aria-controls="tabset-32-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-32-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-2" role="tab" aria-controls="tabset-32-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-32-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-32-3" role="tab" aria-controls="tabset-32-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-32-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-32-1-tab">
<pre><code>/* Numéro du contrat de chaque individu, contrat trié par date de survenue */
proc sort data = Donnees;by identifiant date_entree;run;
data Donnees;set Donnees;
by identifiant date_entree;
retain numero_contrat 0;
if first.identifiant then numero_contrat = 1;
else numero_contrat = numero_contrat + 1;
run;</code></pre>
</div>
<div id="tabset-32-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-32-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro du contrat de chaque individu, contrat trié par date de survenue</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>numero_contrat <span class="ot">&lt;-</span> <span class="fu">ave</span>(donnees_rbase<span class="sc">$</span>a, donnees_rbase<span class="sc">$</span>identifiant, <span class="at">FUN =</span> cumsum)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour trier les colonnes</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>tri <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"date_entree"</span>, <span class="st">"numero_contrat"</span>, <span class="st">"num_observation"</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>donnees_rbase_tri <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(tri, <span class="fu">colnames</span>(donnees_rbase)[<span class="sc">!</span> <span class="fu">colnames</span>(donnees_rbase) <span class="sc">%in%</span> tri])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-32-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-32-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Numéro du contrat de chaque individu, contrat trié par date de survenue </span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(identifiant, date_entree) <span class="sc">%&gt;%</span> </span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numero_contrat=</span><span class="fu">row_number</span>())</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="co"># arrange() va permettre de trier les observations par identifiant et date d'entrée </span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour trier les colonnes</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse_tri <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, date_entree, numero_contrat, num_observation, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="identifier-le-1er-le-2e-le-dernier-contrat-dun-individu" class="level3">
<h3 class="anchored" data-anchor-id="identifier-le-1er-le-2e-le-dernier-contrat-dun-individu">Identifier le 1er, le 2e, le dernier contrat d’un individu</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-33-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-1" role="tab" aria-controls="tabset-33-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-33-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-2" role="tab" aria-controls="tabset-33-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-33-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-33-3" role="tab" aria-controls="tabset-33-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-33-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-33-1-tab">
<pre><code>/* 2e contrat de l'individu (et rien si l'individu a fait 1 seul contrat */
data Deuxieme_Contrat;set Donnees;if numero_contrat = 2;run;
data Deuxieme_Contrat;set Donnees (where = (numero_contrat = 2));run;</code></pre>
</div>
<div id="tabset-33-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-33-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtre sur le deuxième contrat </span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>deuxieme_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[donnees_rbase<span class="sc">$</span>numero_contrat <span class="sc">==</span> <span class="dv">2</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une base avec les seuls premiers contrats, et une base avec les seuls derniers contrats</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>premier_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>dernier_contrat_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>ni_prem_ni_der_rbase  <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span> (<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>) <span class="sc">|</span> <span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">TRUE</span>)), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-33-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-33-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtre sur le deuxième contrat </span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>deuxieme_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat <span class="sc">==</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une base avec les seuls premiers contrats, et une base avec les seuls derniers contrats</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>premier_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">==</span><span class="dv">1</span>)</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>dernier_contrat_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">==</span><span class="fu">max</span>(numero_contrat)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>ni_prem_ni_der_tidyverse  <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span> </span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(numero_contrat<span class="sc">!=</span><span class="dv">1</span> <span class="sc">&amp;</span> numero_contrat <span class="sc">!=</span> <span class="fu">max</span>(numero_contrat)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="date-de-fin-du-contrat-précédent" class="level3">
<h3 class="anchored" data-anchor-id="date-de-fin-du-contrat-précédent">Date de fin du contrat précédent</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-34-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-34-1" role="tab" aria-controls="tabset-34-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-34-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-34-2" role="tab" aria-controls="tabset-34-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-34-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-34-3" role="tab" aria-controls="tabset-34-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-34-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-34-1-tab">
<pre><code>/* La date de fin du contrat précédent */
proc sort data = Donnees;by identifiant date_entree;run;
data DonneesBon;set Donnees;
by identifiant date_entree;
format Date_fin_1 ddmmyy10.;
Date_fin_1 = lag(Date_sortie);
if first.identifiant then Date_fin_1 = .;
run;</code></pre>
</div>
<div id="tabset-34-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-34-2-tab">
<section id="la-date-de-fin-du-contrat-précédent" class="level1">
<h1>La date de fin du contrat précédent</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entre, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut soit utiliser un package, soit utiliser cette astuce car il n'existe pas de fonction lag dans le R de base (à notre connaissance)</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="cn">NA</span>), donnees_rbase<span class="sc">$</span>date_sortie[ <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(donnees_rbase<span class="sc">$</span>date_sortie) <span class="sc">-</span> <span class="dv">1</span>)])</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>date_sortie_1[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase<span class="sc">$</span>identifiant, <span class="at">fromLast =</span> <span class="cn">FALSE</span>)] <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
<div id="tabset-34-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-34-3-tab">

</div>
</div>
</div>
</section>
<section id="valeur-retardée-lag" class="level3">
<h3 class="anchored" data-anchor-id="valeur-retardée-lag">Valeur retardée (lag)</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-35-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-1" role="tab" aria-controls="tabset-35-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-35-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-2" role="tab" aria-controls="tabset-35-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-35-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-35-3" role="tab" aria-controls="tabset-35-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-35-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-35-1-tab">
<pre><code>/* ATTENTION au lag DANS UNE CONDITION IF (cf. document) */
proc sort data = Donnees;by identifiant date_entree;run;
data Lag_Bon;set Donnees (keep = identifiant date_entree date_sortie);
format date_sortie_1 lag_faux lag_bon ddmmyy10.;
/* Erreur */
if date_entree = lag(date_sortie) + 1 then lag_faux = lag(date_sortie) + 1;
/* Bonne écriture */
date_sortie_1 = lag(date_sortie);
if date_entree = date_sortie_1 + 1 then lag_bon = date_sortie_1 + 1;
run;</code></pre>
</div>
<div id="tabset-35-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-35-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il n'existe pas de fonction lag dans le R de base (à notre connaissance)</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut soit utiliser un package, soit utiliser cette astuce</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase$date_sortie_1 &lt;- c(as.Date(NA), donnees_rbase$date_sortie[ 1:(length(donnees_rbase$date_sortie) - 1)])</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase$date_sortie_1[!duplicated(donnees_rbase$identifiant, fromLast = FALSE)] &lt;- as.Date(NA) </span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ne marche pas </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-35-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-35-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># utiliser lag()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="requêtes-complexes-sur-les-contrats" class="level3">
<h3 class="anchored" data-anchor-id="requêtes-complexes-sur-les-contrats">Requêtes complexes sur les contrats</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-36-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-1" role="tab" aria-controls="tabset-36-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-36-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-2" role="tab" aria-controls="tabset-36-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-36-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-36-3" role="tab" aria-controls="tabset-36-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-36-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-36-1-tab">

</div>
<div id="tabset-36-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-36-2-tab">

</div>
<div id="tabset-36-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-36-3-tab">

</div>
</div>
</div>
</section>
<section id="transposer-une-base" class="level3">
<h3 class="anchored" data-anchor-id="transposer-une-base">Transposer une base</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-37-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-1" role="tab" aria-controls="tabset-37-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-37-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-2" role="tab" aria-controls="tabset-37-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-37-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-37-3" role="tab" aria-controls="tabset-37-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-37-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-37-1-tab">
<pre><code>/* Transposer une base */
proc freq data = Donnees;table Sexef * cspf / out = Nb;run;
proc sort data = Nb;by cspf Sexef;run;
proc print data = Nb;run;
proc transpose data = Nb out = transpose;by cspf;var count;id Sexef;run;
data transpose;set transpose (drop = _name_ _label_);run;
proc print data = transpose;run;</code></pre>
</div>
<div id="tabset-37-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-37-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># as.data.frame.matrix est nécessaire, car le résultat de xtabs est un array</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>nb_rbase <span class="ot">&lt;-</span> <span class="fu">as.data.frame.matrix</span>(<span class="fu">xtabs</span>( <span class="sc">~</span> cspf <span class="sc">+</span> sexef, <span class="at">data =</span> donnees_rbase))</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>nb_transpose_rbase <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(nb_rbase))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-37-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-37-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>nb_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">tabyl</span>(cspf, sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>                <span class="co"># colonne cspf comme nom de ligne</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">column_to_rownames</span>(<span class="at">var=</span><span class="st">"cspf"</span>)</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>nb_transpose_tridyverse <span class="ot">&lt;-</span> nb_tidyverse <span class="sc">%&gt;%</span> sjmisc<span class="sc">::</span><span class="fu">rotate_df</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-valeurs-manquantes" class="level2">
<h2 class="anchored" data-anchor-id="les-valeurs-manquantes">Les valeurs manquantes</h2>
<section id="repérer-les-valeurs-manquantes" class="level3">
<h3 class="anchored" data-anchor-id="repérer-les-valeurs-manquantes">Repérer les valeurs manquantes</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-38-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-38-1" role="tab" aria-controls="tabset-38-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-38-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-38-2" role="tab" aria-controls="tabset-38-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-38-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-38-3" role="tab" aria-controls="tabset-38-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-38-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-38-1-tab">
<pre><code>/* Repérer les valeurs manquantes */
data Missing;set Donnees;
/* 1ère solution */
if missing(age) or missing(Niveau) then missing1 = 1;else missing1 = 0;
if age = . or Niveau = '' then missing2 = 1;else missing2 = 0;
keep Age Niveau Missing1 Missing2;
run;</code></pre>
</div>
<div id="tabset-38-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-38-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase<span class="sc">$</span>missing <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age) <span class="sc">|</span> <span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>niveau), <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>ageManquant_rbase_faux <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age),  ] <span class="co"># Faux : crée une basse de données avec que des NA</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>ageManquant_rbase_correct <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">is.na</span>(donnees_rbase<span class="sc">$</span>age), ] <span class="co"># Correct</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-38-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-38-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(age) <span class="sc">|</span> <span class="fu">is.na</span>(niveau), <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>ageManquant_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(age))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="incidence-des-valeurs-manquantes-différent-entre-sas-et-r" class="level3">
<h3 class="anchored" data-anchor-id="incidence-des-valeurs-manquantes-différent-entre-sas-et-r">Incidence des valeurs manquantes, différent entre SAS et R</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-39-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-39-1" role="tab" aria-controls="tabset-39-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-39-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-39-2" role="tab" aria-controls="tabset-39-2" aria-selected="false" href=""><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-39-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-39-1-tab">

</div>
<div id="tabset-39-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-39-2-tab">
<section id="opérations" class="level4">
<h4 class="anchored" data-anchor-id="opérations">Opérations</h4>
<p>Il suffit de rajouter l’argument <em>na.rm=TRUE</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(donnees_rbase<span class="sc">$</span>note_formateur) <span class="co"># s'il existe un seul NA et que l'on ne précise rien, la fonction retournera NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut donc rajouter l'argument na.rm=TRUE (remove NA) afin de calculer la moyenne sans prendre en compte les NA</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(donnees_rbase<span class="sc">$</span>note_formateur, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tris" class="level4">
<h4 class="anchored" data-anchor-id="tris">Tris</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par ligne (individu et date de début de la formation) par ordre croissant</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># L'option na.last = FALSE (resp. TRUE) indique que les valeurs manquantes doivent figurer à la fin (resp. au début) du tri, que le tri</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># soit croissant ou décroissant</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Tri par ordre croissant de identifiant et décroissant de date_entree (- avant le nom de la variable)</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase &lt;- donnees_rbase[order(donnees_rbase$identifiant, -donnees_rbase$date_entree, na.last = FALSE), ] #ne marche pas pour les dates à refaire</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier la base par colonne (noms de variables)</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># On met identifiant date_entree et date_sortie au début</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="co"># colTri &lt;- c("identifiant", "date_entree", "date_sortie")</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># donnees_rbase[, c(colTri, colnames(donnees_rbase)[! colnames(donnees_rbase) %in% colTri])]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les valeurs manquantes sont situées en dernier dans un tri par ordre croissant ou décroissant (car par défaut l'option na.last = TRUE) ...</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour mimer le tri SAS, il faut écrire :</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(donnees_rbase<span class="sc">$</span>identifiant, donnees_rbase<span class="sc">$</span>date_entree, <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
</div>
</div>
</section>
</section>
<section id="les-doublons" class="level2">
<h2 class="anchored" data-anchor-id="les-doublons">Les doublons</h2>
<section id="repérage-des-doublons" class="level3">
<h3 class="anchored" data-anchor-id="repérage-des-doublons">Repérage des doublons</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-40-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-1" role="tab" aria-controls="tabset-40-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-40-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-2" role="tab" aria-controls="tabset-40-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-40-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-40-3" role="tab" aria-controls="tabset-40-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-40-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-40-1-tab">
<pre><code>/* On récupère déjà la dernière variable de la base (on en aura besoin plus loin) */
proc contents data = Donnees out = Var noprint;run;
proc sql noprint;select name into :derniere_var from Var where varnum = (select max(varnum) from Var);quit;

/* 1ère méthode */
proc sort data = Donnees;by &amp;nom_col.;run;
data Doublons;set Donnees;by &amp;nom_col.;
if first.&amp;derniere_var. = 0 or last.&amp;derniere_var. = 0;
run;

/* 2e méthode */

/* On remplace les blancs entre les mots par des virgules pour la proc sql */

/* Dans la proc SQL, les variables doivent être séparées par des virgules */
%let nom_col_sql = %sysfunc(tranwrd(&amp;nom_col., %str( ), %str(, )));

/* On groupe par toutes les colonnes, et si on aboutit à strictement plus qu'une ligne, c'est un doublon */
proc sql;create table Doublons as select * from Donnees group by &amp;nom_col_sql. having count(*) &gt; 1;quit;

/* Suppression des doublons */

/* 1ère méthode */
proc sort data = Donnees nodupkey;by &amp;nom_col.;run;

/* 2e méthode, avec first. et last. (cf. infra) */

/* On récupère déjà la dernière variable de la base (on en aura besoin plus loin) */
proc contents data = Donnees out = Var noprint;run;
proc sql noprint;select name into :derniere_var from Var where varnum = (select max(varnum) from Var);quit;
proc sql noprint;select name into :nom_col separated by " " from Var order by varnum;quit;
%put Dernière variable de la base : &amp;derniere_var.;
%put &amp;nom_col.;
proc sort data = Donnees;by &amp;nom_col.;run;
data Donnees;set Donnees;by &amp;nom_col.;if first.&amp;derniere_var.;run;
</code></pre>
</div>
<div id="tabset-40-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-40-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repérage</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>doublons_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">duplicated</span>(donnees_rbase), ]</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co">#doublons ici : toute la ligne est identique avec une autre ligne </span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="co">#avec cette commande, s'il y existe des doublons i.e. deux observations qui ont les mêmes observations pour toutes les variables, la base doublons_rbase stockera uniquement un des doublons mais pas toutes les lignes qui sont identiques </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-40-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-40-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repérage</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>doublons_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant, sexe) <span class="sc">%&gt;%</span> </span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>()<span class="sc">&gt;</span><span class="dv">1</span>)</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="co">#doublons ici : les observations qui ont le même identifiant et le même sexe </span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co">#avec cette commande, la base doublons_tidyverse va stocker toutes les observations qui sont en doubles i.e. qui ont le même identifiant et le même sexe </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="suppression-des-doublons" class="level3">
<h3 class="anchored" data-anchor-id="suppression-des-doublons">Suppression des doublons</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-41-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-1" role="tab" aria-controls="tabset-41-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-41-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-2" role="tab" aria-controls="tabset-41-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-41-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-41-3" role="tab" aria-controls="tabset-41-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-41-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-41-1-tab">

</div>
<div id="tabset-41-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-41-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span> <span class="fu">duplicated</span>(donnees_rbase), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre solution (solution first. de SAS)</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="fu">order</span>(<span class="fu">colnames</span>(donnees_rbase), <span class="at">na.last =</span> <span class="cn">FALSE</span>), ]</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>donnees_rbase <span class="ot">&lt;-</span> donnees_rbase[<span class="sc">!</span><span class="fu">duplicated</span>(donnees_rbase[, <span class="fu">colnames</span>(donnees_rbase)], <span class="at">fromLast =</span> <span class="cn">TRUE</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-41-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-41-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="les-jointures-de-base" class="level2">
<h2 class="anchored" data-anchor-id="les-jointures-de-base">Les jointures de base</h2>
<section id="inner-join-identifiants-communs-aux-bases" class="level3">
<h3 class="anchored" data-anchor-id="inner-join-identifiants-communs-aux-bases">Inner Join : identifiants communs aux bases</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-42-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-1" role="tab" aria-controls="tabset-42-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-42-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-2" role="tab" aria-controls="tabset-42-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-42-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-42-3" role="tab" aria-controls="tabset-42-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-42-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-42-1-tab">
<pre><code>/* On suppose que l'on dispose d'une base supplémentaire avec les diplômes des personnes */
data Diplome;
infile cards dsd dlm='|';
format Identifiant $3. Diplome $50.;
input Identifiant $ Diplome $;
cards;
173|Bac
168|Bep-Cap
112|Bep-Cap
087|Bac+2
689|Bac+2
765|Pas de diplôme
112|Bac
999|Bac
554|Bep-Cap
;
run;
data Jointure;set Donnees (keep = Identifiant Sexe Age);run;

/* Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge */
proc sort data = Diplome;by identifiant;run;
proc sort data = Jointure;by identifiant;run;
data Inner_Join1;
merge Jointure (in = a) Diplome (in = b);
by identifiant;
if a and b;
run;

/* Le tri préalable des bases de données à joindre n'est pas nécessaire avec la jointure SQL */
proc sql;
create table Inner_Join2 as
select * from Jointure a inner join Diplome b on a.identifiant = b.identifiant
order by a.identifiant;
quit;
proc print data = Inner_Join1;run;
proc sql;select count(*) from Inner_Join1;quit;</code></pre>
</div>
<div id="tabset-42-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-42-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On suppose que l'on dispose d'une base supplémentaire avec les diplômes des personnes</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>diplome_rbase <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">identifiant_i =</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"168"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"112"</span>, <span class="st">"999"</span>, <span class="st">"554"</span>),</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="at">diplome=</span> <span class="fu">c</span>(<span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Pas de diplôme"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>),</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="at">age_dip =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">20</span>)</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Inner join : les seuls identifiants communs aux deux bases</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>jointure_rbase <span class="ot">&lt;-</span> donnees_rbase[, <span class="fu">c</span>(<span class="st">"identifiant"</span>, <span class="st">"sexe"</span>, <span class="st">"age"</span>)]</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>innerJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>)</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(innerJoin_rbase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-42-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-42-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On suppose que l'on dispose d'une base supplémentaire avec les diplômes des personnes</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>diplome_tidyverse <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">identifiant=</span> <span class="fu">c</span>(<span class="st">"173"</span>, <span class="st">"168"</span>, <span class="st">"112"</span>, <span class="st">"087"</span>, <span class="st">"689"</span>, <span class="st">"765"</span>, <span class="st">"112"</span>, <span class="st">"999"</span>, <span class="st">"554"</span>),</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="at">diplome=</span> <span class="fu">c</span>(<span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bep-Cap"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Bac+2"</span>, <span class="st">"Pas de diplôme"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"Bep-Cap"</span>),</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="at">age_dip =</span> <span class="fu">c</span>(<span class="dv">22</span>, <span class="dv">27</span>, <span class="dv">18</span>, <span class="dv">23</span>, <span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">18</span>, <span class="dv">20</span>)</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Inner join : les seuls identifiants communs aux deux bases</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>jointure_tidyverse<span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(identifiant, sexe, age)</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>innerJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(diplome_tidyverse, <span class="at">by=</span><span class="st">"identifiant"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="left-et-right-join-identifiants-de-lune-des-bases" class="level3">
<h3 class="anchored" data-anchor-id="left-et-right-join-identifiants-de-lune-des-bases">Left et Right Join : identifiants de l’une des bases</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-43-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-1" role="tab" aria-controls="tabset-43-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-43-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-2" role="tab" aria-controls="tabset-43-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-43-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-43-3" role="tab" aria-controls="tabset-43-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-43-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-43-1-tab">
<pre><code>/* Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge */
proc sort data = Diplome;by identifiant;run;
proc sort data = Jointure;by identifiant;run;
data Left_Join1;
merge Jointure (in = a) Diplome (in = b);
by identifiant;
if a;
run;</code></pre>
</div>
<div id="tabset-43-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-43-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Left join : les identifiants de la base de gauche</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>leftJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(leftJoin_rbase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-43-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-43-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Left join : les identifiants de la base de gauche</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>leftJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(diplome_tidyverse, <span class="at">by=</span><span class="st">"identifiant"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="full-join-identifiants-de-lune-ou-lautre-des-bases" class="level3">
<h3 class="anchored" data-anchor-id="full-join-identifiants-de-lune-ou-lautre-des-bases">Full Join : identifiants de l’une ou l’autre des bases</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-44-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-1" role="tab" aria-controls="tabset-44-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-44-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-2" role="tab" aria-controls="tabset-44-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-44-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-44-3" role="tab" aria-controls="tabset-44-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-44-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-44-1-tab">
<pre><code>/* Le tri préalable des bases de données à joindre par la variable de jointure est nécessaire avec la stratégie merge */
proc sort data = Diplome;by identifiant;run;
proc sort data = Jointure;by identifiant;run;
data Full_Join1;
merge Jointure (in = a) Diplome (in = b);
by identifiant;
if a or b;
run;</code></pre>
</div>
<div id="tabset-44-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-44-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Full join : les identifiants des deux bases</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>fullJoin_rbase <span class="ot">&lt;-</span> <span class="fu">merge</span>(jointure_rbase, diplome_rbase, <span class="at">by.x =</span> <span class="st">"identifiant"</span>, <span class="at">by.y =</span> <span class="st">"identifiant_i"</span>, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(fullJoin_rbase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-44-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-44-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Full join : les identifiants des deux bases</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>fullJoin_tidyverse <span class="ot">&lt;-</span> jointure_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(diplome_tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="cross-join-toutes-les-combinaisons-possibles" class="level3">
<h3 class="anchored" data-anchor-id="cross-join-toutes-les-combinaisons-possibles">Cross Join : toutes les combinaisons possibles</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-45-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-1" role="tab" aria-controls="tabset-45-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-45-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-2" role="tab" aria-controls="tabset-45-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-45-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-45-3" role="tab" aria-controls="tabset-45-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-45-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-45-1-tab">
<pre><code>/* 4. Cross join : toutes les combinaisons possibles de CSP, sexe et Diplome */
proc sql;
select *
from (select distinct CSPF from Donnees) cross join (select distinct Sexef from Donnees) cross join (select distinct Diplome from Diplome)
order by CSPF, Sexef, Diplome;
quit;
</code></pre>
</div>
<div id="tabset-45-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-45-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Cross join : toutes les combinaisons possibles de CSP, sexe et Diplome</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>crossJoin_rbase <span class="ot">&lt;-</span> <span class="fu">unique</span>(<span class="fu">expand.grid</span>(donnees_rbase<span class="sc">$</span>cspf, donnees_rbase<span class="sc">$</span>sexef, diplome_rbase<span class="sc">$</span>diplome))</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(crossJoin_rbase) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"cspf"</span>, <span class="st">"sexef"</span>, <span class="st">"diplome"</span>)</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>crossJoin_rbase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-45-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-45-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Cross join </span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>crossJoin_tidyverse <span class="ot">&lt;-</span> <span class="fu">cross_join</span>(jointure_tidyverse, diplome_tidyverse) <span class="co">#à refaire</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="empiler-les-bases" class="level3">
<h3 class="anchored" data-anchor-id="empiler-les-bases">Empiler les bases</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-46-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-1" role="tab" aria-controls="tabset-46-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-46-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-2" role="tab" aria-controls="tabset-46-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-46-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-46-3" role="tab" aria-controls="tabset-46-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-46-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-46-1-tab">

</div>
<div id="tabset-46-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-46-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lorsque les variables ne correspondent pas, on les crée avec des valeurs manquantes, via setdiff</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>empilement <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">c</span>(donnees_rbase, <span class="fu">sapply</span>(<span class="fu">setdiff</span>(<span class="fu">names</span>(diplome_rbase), <span class="fu">names</span>(donnees_rbase)), <span class="cf">function</span>(x) <span class="cn">NA</span>))),</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="fu">c</span>(diplome_rbase, <span class="fu">sapply</span>(<span class="fu">setdiff</span>(<span class="fu">names</span>(donnees_rbase), <span class="fu">names</span>(diplome_rbase)), <span class="cf">function</span>(x) <span class="cn">NA</span>)))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ajouter rbind et cbind</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-46-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-46-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co">#binds_col</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co">#binds_row </span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="co">#à rajouter</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="statistiques-descriptives" class="level2">
<h2 class="anchored" data-anchor-id="statistiques-descriptives">Statistiques descriptives</h2>
<section id="somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs" class="level3">
<h3 class="anchored" data-anchor-id="somme-moyenne-médiane-minimum-maximum-nombre-de-valeurs">Somme, moyenne, médiane, minimum, maximum, nombre de valeurs</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-47-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-1" role="tab" aria-controls="tabset-47-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-47-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-2" role="tab" aria-controls="tabset-47-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-47-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-47-3" role="tab" aria-controls="tabset-47-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-47-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-47-1-tab">
<pre><code>/* Moyenne de chaque note */
%let notes = Note_Contenu Note_Formateur Note_Moyens Note_Accompagnement Note_Materiel;
proc means data = Donnees mean;var &amp;notes.;run;

/* Somme, moyenne, médiane, minimum, maximum, nombre de données */
proc means data = Donnees sum mean median min max n;var &amp;notes.;run;

/* Notes pondérées (poids de sondage) */
proc means data = Donnees sum mean median min max n;var &amp;notes.;weight poids_sondage;run;</code></pre>
</div>
<div id="tabset-47-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-47-2-tab">
<ul>
<li>Moyenne</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Moyenne de chaque note</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>notes_rbase <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">c</span>(<span class="st">"Note_Contenu"</span>, <span class="st">"Note_Formateur"</span>, <span class="st">"Note_Moyens"</span>, <span class="st">"Note_Accompagnement"</span>, <span class="st">"Note_Materiel"</span>))</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(donnees_rbase[, notes_rbase], mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne, médiane, maximum, minimum</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(donnees_rbase[, notes], <span class="cf">function</span>(x) <span class="fu">c</span>(<span class="st">"Somme"</span> <span class="ot">=</span> <span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"Moyenne"</span> <span class="ot">=</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="st">"Médiane"</span> <span class="ot">=</span> <span class="fu">median</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="st">"Max"</span> <span class="ot">=</span> <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="st">"Min"</span> <span class="ot">=</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne avec pondération</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec la pondération</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(donnees_rbase, <span class="fu">sapply</span>(donnees_rbase[, notes], <span class="cf">function</span>(x) <span class="fu">weighted.mean</span>(x, poids_sondage, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Résumé statistique</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(donnees_rbase[, notes])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-47-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-47-3-tab">
<ul>
<li>Moyenne par identifiant</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>notes_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_all</span>(<span class="at">.funs =</span> <span class="fu">c</span>(<span class="at">mean=</span><span class="st">"mean"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Moyenne par identifiant par pondération</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>notes_tidyverse <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span>  </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"Note"</span>), poids_sondage) <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(note_contenu<span class="sc">:</span>note_materiel, <span class="sc">~</span><span class="fu">weighted.mean</span>(., <span class="at">w =</span> poids_sondage)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="quantiles" class="level3">
<h3 class="anchored" data-anchor-id="quantiles">Quantiles</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-48-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-1" role="tab" aria-controls="tabset-48-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-48-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-2" role="tab" aria-controls="tabset-48-2" aria-selected="false" href="">R base</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-48-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-48-3" role="tab" aria-controls="tabset-48-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-48-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-48-1-tab">

</div>
<div id="tabset-48-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-48-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Déciles et quartiles de la note moyenne</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(donnees_rbase<span class="sc">$</span>note_moyens, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>), <span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-48-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-48-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(identifiant) <span class="sc">%&gt;%</span>  </span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">quantile =</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)),</span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">note_moyens =</span> <span class="fu">quantile</span>(note_moyens, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="tableaux-de-fréquence-contingence-proc-freq" class="level3">
<h3 class="anchored" data-anchor-id="tableaux-de-fréquence-contingence-proc-freq">Tableaux de fréquence / contingence : proc freq</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-49-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-1" role="tab" aria-controls="tabset-49-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-49-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-2" role="tab" aria-controls="tabset-49-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-49-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-49-3" role="tab" aria-controls="tabset-49-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-49-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-49-1-tab">
<pre><code>/* Tableaux de fréquence : proc freq */
proc freq data = Donnees;
tables Sexe CSP / missing;
format Sexe sexef. CSP $cspf.;
/*weight poids_sondage;*/
run;</code></pre>
</div>
<div id="tabset-49-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-49-2-tab">
<p>L’équivalent de <em>proc freq</em> sur SAS :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(donnees_rbase<span class="sc">$</span>sexef, <span class="at">useNA =</span> <span class="st">"always"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-49-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-49-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>tableau_contingence <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>tableau_contingence</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="proportion" class="level3">
<h3 class="anchored" data-anchor-id="proportion">Proportion</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-50-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-1" role="tab" aria-controls="tabset-50-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-50-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-2" role="tab" aria-controls="tabset-50-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-50-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-50-3" role="tab" aria-controls="tabset-50-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-50-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-50-1-tab">

</div>
<div id="tabset-50-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-50-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">table</span>(donnees_rbase<span class="sc">$</span>sexef, <span class="at">useNA =</span> <span class="st">"always"</span>)) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-50-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-50-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>proportion <span class="ot">&lt;-</span> donnees_tidyverse <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sexef) <span class="sc">%&gt;%</span> </span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">pourcentage=</span><span class="fu">round</span>(n<span class="sc">/</span><span class="fu">length</span>(donnees_tidyverse<span class="sc">$</span>sexef)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>))</span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>proportion</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="fonction-macros-sas" class="level2">
<h2 class="anchored" data-anchor-id="fonction-macros-sas">Fonction, macros SAS</h2>
<section id="boucles-itérations" class="level3">
<h3 class="anchored" data-anchor-id="boucles-itérations">Boucles, itérations</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-51-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-1" role="tab" aria-controls="tabset-51-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-51-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-2" role="tab" aria-controls="tabset-51-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-51-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-51-3" role="tab" aria-controls="tabset-51-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-51-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-51-1-tab">

</div>
<div id="tabset-51-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-51-2-tab">

</div>
<div id="tabset-51-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-51-3-tab">

</div>
</div>
</div>
</section>
<section id="créations-automatiques-de-bases-empilements-de-bases" class="level3">
<h3 class="anchored" data-anchor-id="créations-automatiques-de-bases-empilements-de-bases">Créations automatiques de bases, empilements de bases</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-52-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-1" role="tab" aria-controls="tabset-52-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-52-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-2" role="tab" aria-controls="tabset-52-2" aria-selected="false" href=""><code>R base</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-52-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-52-3" role="tab" aria-controls="tabset-52-3" aria-selected="false" href=""><code>tidyverse</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-52-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-52-1-tab">

</div>
<div id="tabset-52-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-52-2-tab">

</div>
<div id="tabset-52-3" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-52-3-tab">

</div>
</div>
</div>
</section>
</section>
<section id="fin-du-programme" class="level2">
<h2 class="anchored" data-anchor-id="fin-du-programme">Fin du programme</h2>
<section id="supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram" class="level3">
<h3 class="anchored" data-anchor-id="supprimer-toutes-les-bases-de-la-mémoire-vive-work-ram">Supprimer toutes les bases de la mémoire vive (work RAM)</h3>
<div class="panel-tabset" data-group="language">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-53-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-53-1" role="tab" aria-controls="tabset-53-1" aria-selected="true" href=""><code>SAS</code></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-53-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-53-2" role="tab" aria-controls="tabset-53-2" aria-selected="false" href=""><code>R base</code></a></li></ul>
<div class="tab-content" data-group="language">
<div id="tabset-53-1" class="unnumbered unlisted tab-pane active" role="tabpanel" aria-labelledby="tabset-53-1-tab">
<pre><code>/* Supprimer toutes les bases de la mémoire vive (la work) =&gt; rm(list = ls()) */
proc datasets lib = work nolist kill;run;</code></pre>
</div>
<div id="tabset-53-2" class="unnumbered unlisted tab-pane" role="tabpanel" aria-labelledby="tabset-53-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="points-de-vigilance-en-sas" class="level2">
<h2 class="anchored" data-anchor-id="points-de-vigilance-en-sas">Points de vigilance en SAS</h2>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Dares/DIP, damien.euzenat@travail.gouv.fr<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Dares/SCS, nassab.abdallah@travail.gouv.fr<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Dares/DIP, damien.euzenat@travail.gouv.fr<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Dares/SCS, nassab.abdallah@travail.gouv.fr<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Dares/DIP, damien.euzenat@travail.gouv.fr<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Dares/SCS, nassab.abdallah@travail.gouv.fr<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>